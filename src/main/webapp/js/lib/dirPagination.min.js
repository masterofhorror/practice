//
(function(){var a="angularUtils.directives.dirPagination";var b;try{b=angular.module(a)}catch(c){b=angular.module(a,[])}b.directive("dirPaginate",["$compile","$parse","$timeout","paginationService",function(e,f,d,g){return{terminal:true,multiElement:true,priority:5000,compile:function h(m,l){if(m[0].hasAttribute("dir-paginate-start")||m[0].hasAttribute("data-dir-paginate-start")){l.$set("ngRepeatStart",l.dirPaginate);m.eq(m.length-1).attr("ng-repeat-end",true)}else{l.$set("ngRepeat",l.dirPaginate)}var o=l.dirPaginate;var n=o.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);var i=/\|\s*itemsPerPage\s*:[^|]*/;if(n[2].match(i)===null){throw"pagination directive: the 'itemsPerPage' filter must be set."}var k=n[2].replace(i,"");var j=f(k);var q=l.paginationId||"__default";g.registerInstance(q);return function p(t,s,r){var w=e(s,false,5000);var v;if(r.currentPage){v=f(r.currentPage)}else{var u=q+"__currentPage";t[u]=1;v=f(u)}g.setCurrentPageParser(q,v,t);if(typeof r.totalItems!=="undefined"){g.setAsyncModeTrue(q);t.$watch(function(){return f(r.totalItems)(t)},function(x){if(0<=x){g.setCollectionLength(q,x)}})}else{t.$watchCollection(function(){return j(t)},function(x){if(x){g.setCollectionLength(q,x.length)}})}w(t)}}}}]);b.directive("dirPaginationControls",["paginationService","paginationTemplate",function(h,e){var g=/^\d+$/;function f(r,v,k,l){var m=[];var s=Math.ceil(v/k);var j=Math.ceil(l/2);var q;if(r<=j){q="start"}else{if(s-j<r){q="end"}else{q="middle"}}var u=l<s;var p=1;while(p<=s&&p<=l){var t=d(p,r,l,s);var o=(p===2&&(q==="middle"||q==="end"));var n=(p===l-1&&(q==="middle"||q==="start"));if(u&&(o||n)){m.push("...")}else{m.push(t)}p++}return m}function d(k,l,n,m){var j=Math.ceil(n/2);if(k===n){return m}else{if(k===1){return k}else{if(n<m){if(m-j<l){return m-n+k}else{if(j<l){return l-j+k}else{return k}}}else{return k}}}}return{restrict:"AE",templateUrl:function(j,i){return i.templateUrl||e.getPath()},scope:{maxSize:"=?",onPageChange:"&?"},link:function(p,m,o){var q;q=o.paginationId||"__default";if(!p.maxSize){p.maxSize=9}p.directionLinks=angular.isDefined(o.directionLinks)?p.$parent.$eval(o.directionLinks):true;p.boundaryLinks=angular.isDefined(o.boundaryLinks)?p.$parent.$eval(o.boundaryLinks):false;if(!h.isRegistered(q)){var k=(q!=="__default")?" (id: "+q+") ":" ";throw"pagination directive: the pagination controls"+k+"cannot be used without the corresponding pagination directive."}var j=Math.max(p.maxSize,5);p.pages=[];p.pagination={last:1,current:1};p.$watch(function(){return(h.getCollectionLength(q)+1)*h.getItemsPerPage(q)},function(r){if(0<r){i()}});p.$watch(function(){return(h.getItemsPerPage(q))},function(s,r){if(s!=r){n(p.pagination.current)}});p.$watch(function(){return h.getCurrentPage(q)},function(s,r){if(s!=r){n(s)}});p.setCurrent=function(r){if(l(r)){h.setCurrentPage(q,r)}};function n(r){if(l(r)){p.pages=f(r,h.getCollectionLength(q),h.getItemsPerPage(q),j);p.pagination.current=r;if(p.onPageChange){p.onPageChange({newPageNumber:r})}}}function i(){var r=parseInt(h.getCurrentPage(q))||1;p.pages=f(r,h.getCollectionLength(q),h.getItemsPerPage(q),j);p.pagination.current=r;p.pagination.last=p.pages[p.pages.length-1];if(p.pagination.last<p.pagination.current){p.setCurrent(p.pagination.last)}}function l(r){return(g.test(r)&&(0<r&&r<=p.pagination.last))}}}}]);b.filter("itemsPerPage",["paginationService",function(d){return function(h,g,f){if(typeof(f)==="undefined"){f="__default"}if(!d.isRegistered(f)){throw"pagination directive: the itemsPerPage id argument (id: "+f+") does not match a registered pagination-id."}var e;var i;if(h instanceof Array){g=parseInt(g)||9999999999;if(d.isAsyncMode(f)){i=0}else{i=(d.getCurrentPage(f)-1)*g}e=i+g;d.setItemsPerPage(f,g);return h.slice(i,e)}else{return h}}}]);b.service("paginationService",function(){var d={};var e;this.registerInstance=function(f){if(typeof d[f]==="undefined"){d[f]={asyncMode:false};e=f}};this.isRegistered=function(f){return(typeof d[f]!=="undefined")};this.getLastInstanceId=function(){return e};this.setCurrentPageParser=function(g,h,f){d[g].currentPageParser=h;d[g].context=f};this.setCurrentPage=function(f,g){d[f].currentPageParser.assign(d[f].context,g)};this.getCurrentPage=function(f){var g=d[f].currentPageParser;return g?g(d[f].context):1};this.setItemsPerPage=function(f,g){d[f].itemsPerPage=g};this.getItemsPerPage=function(f){return d[f].itemsPerPage};this.setCollectionLength=function(f,g){d[f].collectionLength=g};this.getCollectionLength=function(f){return d[f].collectionLength};this.setAsyncModeTrue=function(f){d[f].asyncMode=true};this.isAsyncMode=function(f){return d[f].asyncMode}});b.provider("paginationTemplate",function(){var d="directives/pagination/dirPagination.tpl.html";this.setPath=function(e){d=e};this.$get=function(){return{getPath:function(){return d}}}})})();